(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{LfLP:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("vJKn"),a=n.n(r),l=n("rg98"),s=n("nKUr"),c=n("q1tI"),o=n("jXGF"),i=n("PAPJ"),d=n("Het7"),u=n("V9C6");function m(e){var t=e.slug,n=e.showTitle,r=Object(c.useState)(null),a=r[0],l=r[1];Object(u.a)();return Object(c.useEffect)((function(){(function(e){return f.apply(this,arguments)})(t).then((function(e){return l(e.data.page)}))}),[]),Object(s.jsx)("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-4 md:gap-8 w-full",children:a&&Object(s.jsxs)("div",{className:"col-span-6 md:col-start-3 md:col-end-13",children:[n&&Object(s.jsx)(i.a,{tag:"h2",style:"ultra",className:"uppercase text-5xl md:text-7xl mt-8 md:mt-24",children:a.title}),Object(s.jsx)(d.a,{blocks:a.blocks})]})})}function f(){return(f=Object(l.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.p.fetch({uri:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},qZfp:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n("nKUr"),a=n("xvhg"),l=n("q1tI"),s=n.n(l),c=n("jXGF"),o=n("PAPJ"),i=n("uzmA"),d=n("tbGH"),u=n("LWeC"),m=n("EvyT"),f=n("8PNI"),x=n("Icid"),b=n("vJKn"),j=n.n(b),h=n("rg98"),v=n("ATyU"),p=n("A+1L"),g=function(e){var t=e.index,n=e.databaseId,a=e.artworks,c=e.slug,u=e.updateArtworksData,f=a[t],b=Object(l.useContext)(x.b).onModalClose,p=Object(l.useState)(!1),g=p[0],k=p[1],N=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y(c)){e.next=8;break}return k(!0),O(c),e.next=5,w("mutation UpdateHelpUsHangVotes($id: ID!, $artworkIndex: Int!) {\n  updateHelpUsHangItemVotes(input: {\n    id: $id,\n    artworkIndex: $artworkIndex\n  }) {\n    success\n    votes\n  }\n}",{id:n,artworkIndex:t});case 5:e.sent,u((function(e){var n=e;return n[t].votes++,n})),k(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){return a&&document.documentElement.style.setProperty("--bg-color",f.hoverColor),function(){document.documentElement.style.setProperty("--bg-color","#fff")}}),[a]),Object(l.useEffect)((function(){var e=function(e){"Escape"===e.key&&b()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]);var I=a.reduce((function(e,t){return t.votes&&(e+=t.votes),e}),0);return Object(r.jsx)(v.a.div,{className:"fixed bottom-0 left-0 z-50 flex w-screen h-5/6 px-0 md:px-8 pointer-events-none",transition:{type:"linear"},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},children:Object(r.jsx)("div",{className:"relative w-full bg-white p-4 md:p-8 overflow-auto pointer-events-auto",children:Object(r.jsxs)("div",{className:"relative grid grid-cols-12",children:[Object(r.jsxs)("div",{className:"col-span-full lg:col-start-1 lg:col-end-6 mb-5 lg:mb-0",children:[f.vernon&&Object(r.jsx)(d.a,{vernonId:Number(null===f||void 0===f?void 0:f.vernonobject.replace("artwork_","")),attributes:!0,floatingAttribution:!0}),!f.vernon&&Object(r.jsx)(i.a,{image:null===f||void 0===f?void 0:f.artwork,layout:"responsive",className:"w-full all-children:w-full flex items-end",attributes:!0})]}),Object(r.jsxs)("div",{className:"col-span-full lg:col-start-7 lg:col-end-13",children:[Object(r.jsx)("div",{className:"mb-12",children:g?Object(r.jsx)(r.Fragment,{children:"Submitting your vote..."}):Object(r.jsx)(r.Fragment,{children:y(c)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.a,{tag:"h3",style:"condensed",className:"text-black text-md md:text-lg mb-5",children:"Why did we pick it?"}),Object(r.jsx)(o.a,{tag:"span",className:"block",children:f.description})]}):Object(r.jsxs)("div",{className:"max-w-2xl",children:[Object(r.jsx)(o.a,{tag:"h3",style:"condensed",className:"text-black text-xl md:text-3xl mb-8 md:mb-14",children:"How this season's community curation stacks up."}),Object(r.jsx)("div",{className:"grid grid-cols-12 gap-2 md:gap-7",children:a.map((function(e,t){var n=e.votes/I*100;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsxs)("div",{className:"mr-5 col-span-full md:col-span-4",children:[Object(r.jsx)(o.a,{tag:"span",style:"condensed",className:"block text-lg",children:e.artworkArtist}),Object(r.jsx)(o.a,{tag:"span",children:e.artworkTitle})]}),Object(r.jsxs)("div",{className:"flex col-span-full md:col-span-8",children:[Object(r.jsx)("div",{className:"h-7 mr-2",style:{width:"".concat(n||"1","%"),backgroundColor:e.hoverColor}}),Object(r.jsx)(o.a,{tag:"span",className:"text-lg",style:"condensed",children:Math.floor(n)+"%"})]})]},t)}))})]})})}),y(c)&&Object(r.jsx)("div",{children:Object(r.jsx)(o.a,{tag:"h2",className:"text-5xl md:text-6xl uppercase mb-10 lg:mb-14",style:"ultra",children:"What\u2019s your vote?"})}),Object(r.jsxs)("div",{className:"flex",children:[y(c)&&Object(r.jsxs)("button",{className:"flex items-center mr-5 group focus-visible:ring-offset-white",onClick:N,children:[Object(r.jsx)("div",{className:"bg-black group-hover:bg-hotpink rounded-max flex items-center justify-center mr-2 duration-100",style:{width:"42px",height:"42px"},children:Object(r.jsx)(m.a,{type:"tick"})}),Object(r.jsx)(o.a,{tag:"span",className:"text-md md:text-lg group-hover:text-hotpink duration-100",style:"condensed",children:"Hang it!"})]}),Object(r.jsxs)("button",{className:"flex items-center group focus-visible:ring-offset-white",onClick:b,children:[Object(r.jsx)("div",{className:"bg-black group-hover:bg-hotpink text-white rounded-max flex items-center justify-center mr-2 duration-100",style:{width:"42px",height:"42px"},children:Object(r.jsx)(m.a,{type:"close_vote"})}),Object(r.jsx)(o.a,{tag:"span",className:"text-md md:text-lg group-hover:text-hotpink duration-100",style:"condensed",children:y(c)?"Park It":"Close"})]})]})]})]})})})},w=function(){var e=Object(h.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)().mutation(t,n).toPromise();case 2:return a=e.sent,e.abrupt("return",null===(r=a.data.updateHelpUsHangItemVotes)||void 0===r?void 0:r.votes);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function O(e){var t={id:e,expiry:(new Date).getTime()+864e5};localStorage.setItem("agbVoteExpiry",JSON.stringify(t))}function y(e){var t=localStorage.getItem("agbVoteExpiry");if(!t)return!0;var n=JSON.parse(t);return(new Date).getTime()>n.expiry||n.id!==e}var k=n("dpw9");function N(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,l=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw l}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(){var e,t=Object(u.a)().width,n=Object(l.useState)(null),s=n[0],i=n[1],d=Object(l.useState)(null),m=d[0],b=d[1],j=c.c.use({}),h=Object(a.a)(j,1)[0].data.helpUsHangItems.nodes.filter((function(e){return e.helpUsHangFields.isActive})),v=h.length>0?h[0]:null,p=Object(l.useState)(null===v||void 0===v||null===(e=v.helpUsHangFields)||void 0===e?void 0:e.artworks),w=p[0],O=p[1],y=Object(l.useState)(null),I=y[0],A=y[1],C=Object(l.useRef)(null),S=Object(l.useState)([]),F=S[0],U=S[1],P=function(e){b(null!==e?e:null)},T=function(){document.documentElement.style.setProperty("--bg-color","#fff")};Object(l.useEffect)((function(){window.addEventListener("scroll",(function(){window.innerWidth<1024&&null!==m&&(b(null),T())}))}),[]),Object(l.useEffect)((function(){null!==s?document.documentElement.style.setProperty("--bg-color",v.helpUsHangFields.artworks[s].hoverColor):null!==m?document.documentElement.style.setProperty("--bg-color",v.helpUsHangFields.artworks[m].hoverColor):T()}),[s,m]),Object(l.useEffect)((function(){if(C.current&&v){var e,t=[],n=N(C.current.querySelectorAll("[data-artwork]"));try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.getBoundingClientRect())}}catch(a){n.e(a)}finally{n.f()}U(t)}}),[t,v]);var J=F.reduce((function(e,t){return t.height>e.height?t:e}),F[0]),L=J?.75*J.height:null;return null===v?null:Object(r.jsxs)("div",{className:"mt-10 mb-20 md:my-24 lg:my-32 grid grid-cols-12",ref:C,children:[Object(r.jsxs)("div",{className:"col-span-full text-center mb-8 md:mb-14",children:[Object(r.jsx)(k.a,{text:!0,children:Object(r.jsx)(o.a,{tag:"h2",className:"text-5xl md:text-6xl lg:text-7xl",style:"ultra",children:"HELP US HANG"})}),Object(r.jsx)(o.a,{tag:"p",className:"text-lg md:text-xl lg:text-2xl font-bold",style:"condensed",children:"What should we hang in the Gallery next season?"})]}),v&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"w-screen -ml-margin md:ml-0 md:w-full col-span-full lg:col-start-2 lg:col-end-12 border-b border-black",children:Object(r.jsx)("div",{className:"relative flex items-end w-full md:w-10/12 mx-auto",style:{maxHeight:L?L+"px":"none"},children:v.helpUsHangFields.artworks.map((function(e,t){return Object(r.jsxs)("div",{className:"relative flex-1 transform first:translate-x-8 last:-translate-x-8 self-end ".concat(m===t?"hover:z-30":""),children:[Object(r.jsx)("div",{className:"overflow-hidden pointer-events-none",children:Object(r.jsx)(H,{artwork:e,index:t,hoveredArtworkIndex:m,handleArtworkHover:P,handleClick:function(){return i(t)}})}),Object(r.jsx)(E,{icon:"eye",hoveredArtworkIndex:m,handleArtworkHover:P,handleClick:function(){return i(t)},index:t,setTrigger:A,children:"Review Artwork"})]},t)}))})})}),Object(r.jsx)(f.a,{children:null!==s&&v&&Object(r.jsx)(x.a,{onModalClose:function(){return i(null)},trigger:I,children:Object(r.jsx)(g,{index:s,databaseId:v.databaseId,artworks:w,slug:v.slug,updateArtworksData:O})})})]})}var H=function(e){var t=e.artwork,n=e.index,a=e.handleClick,l=e.handleArtworkHover,s=e.hoveredArtworkIndex;return Object(r.jsxs)("div",{className:"relative cursor-pointer flex-1 pointer-events-auto transform translate-y-1/2 duration-300 ".concat(s===n?"translate-y-1/4":"translate-y-1/2"),"data-artwork":!0,onMouseOver:function(){return l(n)},onMouseOut:function(){return l(null)},onClick:function(){return a(n)},children:[t.vernon&&Object(r.jsx)(d.a,{vernonId:null===t||void 0===t?void 0:t.vernonobject.replace("artwork_",""),objectFit:"none"}),!t.vernon&&Object(r.jsx)(i.a,{image:null===t||void 0===t?void 0:t.artwork,layout:"responsive",className:"w-full all-children:w-full flex items-end",objectFit:"none"})]},n)},E=function(e){var t=e.hoveredArtworkIndex,n=e.index,a=e.icon,s=e.handleClick,c=void 0===s?function(){}:s,i=e.handleArtworkHover,d=void 0===i?function(){}:i,u=e.setTrigger,f=e.children,x=Object(l.useRef)(null);return Object(r.jsxs)("button",{ref:x,className:"absolute left-0 top-full items-center hidden md:flex py-2 md:py-5 ".concat(t===n?"opacity-100":"opacity-0"," duration-100"),onMouseOver:function(){return d(n)},onMouseOut:function(){return d(null)},onFocus:function(){return d(n)},onBlur:function(){return d(null)},onClick:function(){u(x.current),c(n)},children:[Object(r.jsx)("div",{className:"bg-black rounded-max flex items-center justify-center mr-2 md:mr-4 w-8 h-8 md:w-11 md:h-11",children:Object(r.jsx)(m.a,{type:a,className:"w-4 md:w-auto text-white"})}),Object(r.jsx)(o.a,{tag:"span",className:"text-md md:text-lg",style:"condensed",children:f})]})}}}]);